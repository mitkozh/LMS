<div class="edit-book-container">
  <div class="form-wrapper">
    <form [formGroup]="form">
      <app-labeled-input
        [label]="'ISBN'"
        [fieldId]="'isbn'"
        [fieldName]="'isbn'"
        [inputType]="'input'"
        [validationMessages]="bookValidationMessages['isbn']"
        [inputControl]="getFormControlByName('isbn')!"
      ></app-labeled-input>

      <app-labeled-input
        [label]="'Title'"
        [fieldId]="'title'"
        [fieldName]="'title'"
        [inputType]="'input'"
        [validationMessages]="bookValidationMessages['title']"
        [inputControl]="getFormControlByName('title')!"
      ></app-labeled-input>

      <app-labeled-input
        [label]="'Description'"
        [fieldId]="'description'"
        [fieldName]="'description'"
        [inputType]="'textarea'"
        [validationMessages]="bookValidationMessages['description']"
        [inputControl]="getFormControlByName('description')!"
      ></app-labeled-input>

      <app-labeled-input
        [photo]="bookCover"
        inputType="file-upload"
        [required]="true"
        fieldId="coverPhoto"
        label="Cover Photo"
        (coverPhotoNameChange)="handleCoverPhotoNameChange($event)"
      ></app-labeled-input>

      <app-labeled-input
        [label]="'Volume'"
        [fieldId]="'volume'"
        [fieldName]="'volume'"
        [inputType]="'input'"
        [validationMessages]="bookValidationMessages['volume']"
        [inputControl]="getFormControlByName('volume')!"
      ></app-labeled-input>

      <app-labeled-input
        [label]="'Authors'"
        [fieldId]="'authors'"
        [inputType]="'app-search-input'"
        [validationMessages]="bookValidationMessages['authors']"
        [inputControl]="getFormControlByName('authors')!"
        [suggestionsDynamic]="authorSearchResults"
        [optionTemplate]="optionTemplate"
        (completeMethod)="onAuthorTextChange($event)"
      ></app-labeled-input>
      <ng-template #optionTemplate let-author>
        <div class="author">
          <img [src]="author.profilePhoto" class="profilePicMini" />
          <div>{{ author.name }}</div>
        </div>
      </ng-template>
      <div *ngIf="noAuthorResulMessage.length > 0" #noAuthor>
        <p>
          {{ noAuthorResulMessage }}
          <a (click)="openAuthorAddModal()">Do you want to add one?</a>
        </p>
      </div>
      <app-labeled-input
        [label]="'Categories'"
        [fieldId]="'categories'"
        [fieldName]="'categories'"
        [inputType]="'autocomplete'"
        [validationMessages]="bookValidationMessages['categories']"
        [inputControl]="getFormControlByName('categories')!"
        (completeMethod)="filterCategories($event)"
        [multiple]="true"
        [suggestions]="filteredCategories"
      ></app-labeled-input>

      <app-labeled-input
        [label]="'Call Number'"
        [fieldId]="'callNumber'"
        [fieldName]="'callNumber'"
        [inputType]="'input'"
        [validationMessages]="bookValidationMessages['callNumber']"
        [inputControl]="getFormControlByName('callNumber')!"
      ></app-labeled-input>

      <app-labeled-input
        [label]="'Inventory Number'"
        [fieldId]="'inventoryNumber'"
        [fieldName]="'inventoryNumber'"
        [inputType]="'input'"
        [validationMessages]="bookValidationMessages['inventoryNumber']"
        [inputControl]="getFormControlByName('inventoryNumber')!"
      ></app-labeled-input>

      <app-labeled-input
        [label]="'Price'"
        [fieldId]="'price'"
        [fieldName]="'price'"
        [inputType]="'input'"
        [validationMessages]="bookValidationMessages['price']"
        [inputControl]="getFormControlByName('price')!"
        [type]="'number'"
        [required]="false"
      ></app-labeled-input>

      <app-labeled-input
        [label]="'School Inventory Number'"
        [fieldId]="'schoolInventoryNumber'"
        [fieldName]="'schoolInventoryNumber'"
        [inputType]="'input'"
        [validationMessages]="bookValidationMessages['schoolInventoryNumber']"
        [inputControl]="getFormControlByName('schoolInventoryNumber')!"
      ></app-labeled-input>

      <app-labeled-input
        [label]="'Language'"
        [fieldId]="'language'"
        [fieldName]="'language'"
        [inputType]="'autocomplete'"
        [validationMessages]="bookValidationMessages['language']"
        [inputControl]="getFormControlByName('language')!"
        (completeMethod)="filterLanguages($event)"
        [suggestions]="filteredLanguages"
        [multiple]="false"
      ></app-labeled-input>
      <div *ngIf="noLanguageResultMessage.length > 0">
        <p>
          {{ noLanguageResultMessage }}
          <a (click)="openLanguageAddModal()">Do you want to add one?</a>
        </p>
      </div>

      <app-labeled-input
        [label]="'Publisher'"
        [fieldId]="'publisher'"
        [inputType]="'app-search-input'"
        [validationMessages]="bookValidationMessages['publisher']"
        [inputControl]="getFormControlByName('publisher')!"
        [suggestionsDynamic]="publisherSearchResults"
        [optionTemplate]="optionTemplate2"
        [multiple]="false"
        (completeMethod)="onPublisherTextChange($event)"
        [dataKey]="'name'"
        [field]="'name'"
      ></app-labeled-input>
      <ng-template #optionTemplate2 let-publisher>
        <div class="publisher">
          <div>{{ publisher.name }}</div>
        </div>
      </ng-template>
      <div *ngIf="noPublisherResultMessage.length > 0">
        <p>
          {{ noPublisherResultMessage }}
          <a (click)="openPublisherAddModal()">Do you want to add one?</a>
        </p>
      </div>

      <app-labeled-input
        [label]="'Binding'"
        [fieldId]="'binding'"
        [fieldName]="'binding'"
        [inputType]="'autocomplete'"
        [validationMessages]="bookValidationMessages['binding']"
        [inputControl]="getFormControlByName('binding')!"
        (completeMethod)="filterBinding($event)"
        [suggestions]="filteredBindings"
        [dropdown]="true"
        [multiple]="false"
      ></app-labeled-input>

      <app-labeled-input
        [label]="'Size'"
        [fieldId]="'size'"
        [fieldName]="'size'"
        [inputType]="'input'"
        [validationMessages]="bookValidationMessages['size']"
        [inputControl]="getFormControlByName('size')!"
      ></app-labeled-input>

      <app-labeled-input
        [label]="'Publication Date'"
        [fieldId]="'publicationDate'"
        [fieldName]="'publicationDate'"
        [inputType]="'calendar'"
        [validationMessages]="bookValidationMessages['publicationDate']"
        [inputControl]="getFormControlByName('publicationDate')!"
        [required]="false"
      ></app-labeled-input>

      <app-labeled-input
        [label]="'Edition'"
        [fieldId]="'edition'"
        [fieldName]="'edition'"
        [inputType]="'input'"
        [validationMessages]="bookValidationMessages['edition']"
        [inputControl]="getFormControlByName('edition')!"
      ></app-labeled-input>

      <app-labeled-input
        [label]="'Notes'"
        [fieldId]="'notes'"
        [fieldName]="'notes'"
        [inputType]="'input'"
        [validationMessages]="bookValidationMessages['notes']"
        [inputControl]="getFormControlByName('notes')!"
        [required]="false"
      ></app-labeled-input>

      <app-labeled-input
        [label]="'Acquisition Document'"
        [fieldId]="'acquisitionDocumentEnum'"
        [fieldName]="'acquisitionDocumentEnum'"
        [inputType]="'autocomplete'"
        [validationMessages]="bookValidationMessages['acquisitionDocumentEnum']"
        [inputControl]="getFormControlByName('acquisitionDocumentEnum')!"
        (completeMethod)="filterAquistion($event)"
        [suggestions]="filteredAcquisitions"
        [dropdown]="true"
        [multiple]="false"
      ></app-labeled-input>

      <p-button (click)="onSubmit()">Submit</p-button>
    </form>
  </div>
</div>
